"use strict";(globalThis["webpackChunkbattleship"]=globalThis["webpackChunkbattleship"]||[]).push([[381],{381:(e,n,l)=>{l.r(n),l.d(n,{default:()=>oe});var t=l(9835),a=l(499),i=l(6970),o=l(1957);function r(e,n){const l=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(l,{class:"custom-btn",color:"primary","text-color":"secondary"})}var u=l(1639),c=l(2093),s=l(9984),d=l.n(s);const p={},v=(0,u.Z)(p,[["render",r]]),m=v;d()(p,"components",{QBtn:c.Z});l(9665);var g=l(1809);const f=(0,g.Q_)("battleship",(()=>{const e=(0,a.iH)(!0),n=(0,a.qj)({player:1,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),l=(0,a.qj)({player:2,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),i=(0,t.Fl)((()=>e.value?n:l)),o=10,r=[5,4,3,3,2,2,1,1],u={1:"Patrol Boat",2:"Battleship",3:"Destroyer",4:"Submarine",5:"Carrier"};function c(e){e.grid=[];for(let n=0;n<o;n++){const l=[];for(let e=0;e<o;e++)l.push({coordinate:{R:n,C:e},display:"BLANK",placement:"BLANK",ID:0,isHit:!1});e.grid.push(l)}}function s(e){e.ships=r.map(((e,n)=>({len:e,ID:n+1,name:u[e.toString()],isSet:!1,isSunk:!1,isDamaged:!1})))}function d(){s(n),s(l),c(n),c(l)}function p(){n.placementConfirmed=!1,l.placementConfirmed=!1,d()}function v(e,n){const l=L.value,t=A.value,a=i.value.ships[l-1].len;t&&P(e,n,a)||!t&&H(e,n,a)?(U(e,n,a,t,l),i.value.ships[l-1].isSet=!0):alert("Not enough room!")}function m(e,n){if(i.value.ships.every((e=>e.isSet)))return;const l=L.value,t=A.value,a=i.value.ships[l-1].len;(t&&P(e,n,a)||!t&&H(e,n,a))&&g(e,n,a,t,l)}function g(e,n,l,t){for(let a=0;a<l;a++)t?i.value.grid[e][n+a].display="HOVER":i.value.grid[e+a][n].display="HOVER"}function f(){for(let e=0;e<o;e++)for(let n=0;n<o;n++)i.value.grid[e][n].display=i.value.grid[e][n].placement}function h(){A.value=!A.value}function k(){b(),i.value.ships.forEach((e=>{y(e.len,e.ID),e.isSet=!0}))}function y(e,n){const l=C(e),t=l.R,a=l.C;if(1===e)return void U(t,a,e,!0,n);const i=l.right,o=l.down,r=!!i&&(!i||!o||w());U(t,a,e,r,n)}function C(e){let n=S(o),l=S(o),t=i.value.grid[n][l],a=P(n,l,e),r=H(n,l,e);while("BLANK"!==t.placement||!a&&!r)n=S(o),l=S(o),t=i.value.grid[n][l],a=P(n,l,e),r=H(n,l,e);return{R:n,C:l,right:a,down:r}}function S(e){return Math.floor(Math.random()*e)}function w(){return Math.random()<.5}const D={BLANK:"948C15",PLACED:"1F9415",HOVER:"4f9749",HIT:"921313",MISS:"383232"};function b(){i.value.grid.forEach((e=>e.forEach((e=>{e.display="BLANK",e.placement="BLANK",e.ID=0})))),i.value.ships.forEach((e=>{e.isSet=!1}))}function _(){i.value.placementConfirmed=!0,e.value=!e.value}function U(e,n,l,t,a){for(let i=0;i<l;i++)t?I(e,n+i,a):I(e+i,n,a)}function P(e,n,l){for(let t=1;t<l;t++){const l=n+t;if(l>=o)return!1;const a=i.value.grid[e][l];if("PLACED"===a.placement)return!1}return!0}function H(e,n,l){for(let t=1;t<l;t++){const l=e+t;if(l>=o)return!1;const a=i.value.grid[l][n];if("PLACED"===a.placement)return!1}return!0}function I(e,n,l){i.value.grid[e][n].display="PLACED",i.value.grid[e][n].placement="PLACED",i.value.grid[e][n].ID=l}const A=(0,a.iH)(!0),L=(0,t.Fl)((()=>{const e=i.value.ships.find((e=>!1===e.isSet));return void 0!==e?e.ID:999})),E=(0,a.iH)(!1),B=(0,a.iH)(!1);function W(t,a){const o=e.value?l:n,r=o.grid[t][a];r.isHit=!0,"PLACED"===r.placement&&(o.ships[r.ID-1].isDamaged=!0,T(o.grid,r.ID)&&(o.ships[r.ID-1].isSunk=!0,o.ships.every((e=>e.isSunk))))?E.value=!0:i.value.autoTurn&&setTimeout((()=>{R()}),750)}function T(e,n){const l=e.flat().filter((e=>e.ID===n));return l.every((e=>e.isHit))}function F(){i.value.autoTurn=!i.value.autoTurn}function R(){B.value=!B.value,e.value=!e.value}return{p1Active:e,p1:n,p2:l,gridWidth:o,initGame:d,newGame:p,autoPlace:k,COLORS:D,manualSelectID:L,manualGoRight:A,gameEnd:E,turnInterval:B,nextTurn:R,manualPlace:v,clearPlacement:b,hoverOverCell:m,removeHover:f,activePlayer:i,confirmPlacement:_,rotate:h,endTurnToggle:F,hitCell:W}})),h=["onClick","onMouseenter"],k={__name:"PlacementBoard",setup(e){const n=f(),l=(0,a.iH)();(0,t.bv)((()=>{window.addEventListener("keyup",(function(e){void 0===o.value&&void 0===r.value||82===e.keyCode&&(n.rotate(),n.removeHover(),s(o.value,r.value))}))}));const o=(0,a.iH)(void 0),r=(0,a.iH)(void 0);function u(e,l){const t=n.activePlayer.grid[e][l];return n.COLORS[t.display]}function c(e,l){"PLACED"===n.activePlayer.grid[e][l].placement||n.activePlayer.ships.every((e=>e.isSet))||n.manualPlace(e,l)}function s(e,l){const t=n.activePlayer.grid[e][l];"PLACED"!==t.placement&&(n.hoverOverCell(e,l),o.value=e,r.value=l)}function d(){n.removeHover(),o.value=void 0,r.value=void 0}return(e,o)=>((0,t.wg)(),(0,t.iD)("div",{ref_key:"board",ref:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(n).activePlayer.grid,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{key:n},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:l},[(0,t._)("div",{onClick:e=>c(n,l),onMouseenter:e=>s(n,l),onMouseleave:d,class:"cell",style:(0,i.j5)({background:"#"+u(n,l)})},null,44,h)])))),128))])))),128))],512))}},y=k,C=y,S=e=>((0,t.dD)("data-v-f070b8fe"),e=e(),(0,t.Cn)(),e),w={class:"placement-panel bg-info text-secondary"},D=S((()=>(0,t._)("p",null,"Place your ships on the board!",-1))),b={__name:"PlacementHeader",setup(e){const n=f();function l(e){return e===n.manualSelectID?"accent":"primary"}const i=(0,t.Fl)((()=>n.manualGoRight?"Right":"Down")),o=(0,t.Fl)((()=>n.activePlayer.ships.every((e=>e.isSet))));return(e,r)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",w,[D,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(n).activePlayer.ships,(e=>((0,t.wg)(),(0,t.j4)(m,{key:e.ID,label:e.name,disabled:e.isSet,class:"buttonRow",color:l(e.ID)},null,8,["label","disabled","color"])))),128)),(0,t._)("p",null,[(0,t.Uk)(" Current placement direction is "),(0,t.Wm)(m,{onClick:(0,a.SU)(n).rotate,label:(0,a.SU)(i),class:"buttonRow"},null,8,["onClick","label"]),(0,t.Uk)(' . Click button or press "R" to change. ')]),(0,t._)("p",null,[(0,t.Uk)("Alternatively, you can click to "),(0,t.Wm)(m,{onClick:(0,a.SU)(n).autoPlace,label:"Place all"},null,8,["onClick"])])]),(0,t._)("div",null,[(0,t.Wm)(m,{onClick:(0,a.SU)(n).clearPlacement,label:"Clear Placement"},null,8,["onClick"]),(0,t.Wm)(m,{disabled:!(0,a.SU)(o),onClick:(0,a.SU)(n).confirmPlacement,label:"Confirm Placement"},null,8,["disabled","onClick"])]),(0,t.Wm)(C)]))}},_=(0,u.Z)(b,[["__scopeId","data-v-f070b8fe"]]),U=_;d()(b,"components",{QBtn:c.Z});const P={__name:"ProgressQBtn",props:{sunkState:Boolean,damageState:Boolean,shipLength:Number},setup(e){const n=e,l=(0,a.Vh)(n,"sunkState"),o=(0,a.Vh)(n,"damageState"),r=(0,t.Fl)((()=>o.value?l.value?"secondary":"accent":"primary")),u=(0,t.Fl)((()=>l.value?"warning":"secondary"));return(n,l)=>{const o=(0,t.up)("q-tooltip"),c=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(c,{class:"custom-btn","text-color":(0,a.SU)(u),color:(0,a.SU)(r)},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{anchor:"top middle",self:"top middle",offset:[30,30]},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.shipLength)+" tile",1)])),_:1})])),_:1},8,["text-color","color"])}}};var H=l(2756);const I=P,A=I;d()(P,"components",{QBtn:c.Z,QTooltip:H.Z});const L={key:0,style:{margin:"3% 0% 0% 0%"}},E={key:0},B={__name:"AttackHeader",props:{p1:Boolean},setup(e){const n=e,l=f(),o=n.p1?l.p1:l.p2,r=o.ships,u=(0,t.Fl)((()=>n.p1===l.p1Active)),c=(0,t.Fl)((()=>u.value?"Your Remaining Fleet":"Enemy Destroying Progress")),s=(0,t.Fl)((()=>o.autoTurn?"Automatically":"Manually")),d=(0,t.Fl)((()=>!o.autoTurn));return(e,n)=>{const o=(0,t.up)("q-card-section"),p=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(p,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t._)("p",null,(0,i.zw)((0,a.SU)(c)),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(r),(e=>((0,t.wg)(),(0,t.j4)(A,{key:e.ID,class:"inline",label:e.name,sunkState:e.isSunk,damageState:e.isDamaged,shipLength:e.len},null,8,["label","sunkState","damageState","shipLength"])))),128)),(0,a.SU)(u)?((0,t.wg)(),(0,t.iD)("div",L,[(0,t._)("p",null,[(0,t.Uk)("Turn will end "),(0,t.Wm)(m,{label:(0,a.SU)(s),onClick:(0,a.SU)(l).endTurnToggle,style:{margin:"0% 1% 0% 0%"}},null,8,["label","onClick"]),(0,t.Uk)(" . Click button to change. ")]),(0,a.SU)(d)?((0,t.wg)(),(0,t.iD)("p",E,[(0,t.Uk)(" Click to "),(0,t.Wm)(m,{label:"end turn",onClick:(0,a.SU)(l).nextTurn},null,8,["onClick"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])),_:1})])),_:1})])}}};var W=l(7590),T=l(3190);const F=B,R=F;d()(B,"components",{QCard:W.Z,QCardSection:T.Z,QBtn:c.Z});const q=["onClick"],Q={__name:"AttackPanel",props:{p1:Boolean},setup(e){const n=e,l=f(),o=l.COLORS,r=(0,t.Fl)((()=>n.p1===l.p1Active)),u=n.p1?l.p1:l.p2,c=u.grid;function s(e,n){const l=c[e][n];return r.value?"PLACED"===l.placement?l.isHit?o.HIT:o.PLACED:l.isHit?o.MISS:o.BLANK:l.isHit?"PLACED"===l.placement?o.HIT:o.MISS:o.BLANK}function d(e,n){const t=c[e][n];t.isHit||l.hitCell(e,n)}return(e,n)=>((0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(c),((e,n)=>((0,t.wg)(),(0,t.iD)("div",{key:n},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:l},[(0,a.SU)(r)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"cell",style:(0,i.j5)({background:"#"+s(n,l)})},null,4)):((0,t.wg)(),(0,t.iD)("div",{key:1,onClick:e=>d(n,l),class:"cell",style:(0,i.j5)({background:"#"+s(n,l)})},null,12,q))])))),128))])))),128))]))}},Z=Q,K=Z,O={class:"GameEndModal"},M=(0,t._)("h1",null," Game End!",-1),N={class:"game-panel"},j={key:0},x=(0,t._)("h1",null,"Battleship",-1),G=[x],V={key:0,class:"row"},Y=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 1 please choose fleet placement")],-1),z={key:1,class:"row"},J=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 2 please choose fleet placement")],-1),X={key:2},$={class:"row"},ee={class:"row"},ne={__name:"BattleshipGame",setup(e){const n=f();n.initGame();const l=(0,t.Fl)((()=>n.p1Active?"Player 1":"Player 2")),r=(0,a.iH)();return(0,t.bv)((()=>{window.addEventListener("keyup",(function(e){n.turnInterval&&13===e.keyCode&&(n.turnInterval=!n.turnInterval)}))})),(e,u)=>{const c=(0,t.up)("q-card-section"),s=(0,t.up)("q-btn"),d=(0,t.up)("q-card-actions"),p=(0,t.up)("q-card"),v=(0,t.up)("q-dialog"),g=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",O,[(0,t.Wm)(v,{modelValue:(0,a.SU)(n).gameEnd,"onUpdate:modelValue":u[0]||(u[0]=e=>(0,a.SU)(n).gameEnd=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(l))+" won!",1),M])),_:1}),(0,t.Wm)(d,{align:"center"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(s,{label:"start new",onClick:(0,a.SU)(n).newGame,outline:""},null,8,["onClick"]),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,t._)("div",N,[(0,a.SU)(n).p1.placementConfirmed&&(0,a.SU)(n).p2.placementConfirmed?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",j,G)),(0,t.wy)((0,t._)("div",{ref_key:"customInterval",ref:r},[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(l))+" ready?",1),(0,t._)("p",null,[(0,t.Uk)(" Click button to go "),(0,t.Wm)(m,{label:"next turn",onClick:u[1]||(u[1]=e=>(0,a.SU)(n).turnInterval=!(0,a.SU)(n).turnInterval)}),(0,t.Uk)(" . Or press 'Enter'. ")])],512),[[o.F8,(0,a.SU)(n).turnInterval]]),(0,t.wy)((0,t._)("div",null,[(0,a.SU)(n).p1.placementConfirmed?(0,a.SU)(n).p2.placementConfirmed?((0,t.wg)(),(0,t.iD)("div",X,[(0,t._)("h2",null,(0,i.zw)((0,a.SU)(l))+"'s turn",1),(0,t._)("div",$,[(0,t.Wm)(R,{class:"atk-header col",p1:!0}),(0,t.Wm)(R,{class:"atk-header col",p1:!1})]),(0,t._)("div",ee,[(0,t.Wm)(K,{class:"col",p1:!0}),(0,t.Wm)(K,{class:"col",false:""})])])):((0,t.wg)(),(0,t.iD)("div",z,[J,(0,t.Wm)(U,{class:"panels col"})])):((0,t.wg)(),(0,t.iD)("div",V,[(0,t.Wm)(U,{class:"panels col"}),Y]))],512),[[o.F8,!(0,a.SU)(n).turnInterval]])])])}}};var le=l(3997),te=l(1821),ae=l(2146);const ie=ne,oe=ie;d()(ne,"components",{QDialog:le.Z,QCard:W.Z,QCardSection:T.Z,QCardActions:te.Z,QBtn:c.Z}),d()(ne,"directives",{ClosePopup:ae.Z})}}]);