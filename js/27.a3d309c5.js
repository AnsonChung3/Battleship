"use strict";(globalThis["webpackChunkbattleship"]=globalThis["webpackChunkbattleship"]||[]).push([[27],{9027:(e,l,n)=>{n.r(l),n.d(l,{default:()=>ae});var t=n(9835),a=n(499),i=n(6970),o=n(1957);function u(e,l){const n=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(n,{class:"custom-btn",color:"primary","text-color":"secondary"})}var r=n(1639),c=n(2093),s=n(9984),d=n.n(s);const p={},v=(0,r.Z)(p,[["render",u],["__scopeId","data-v-33a8217d"]]),m=v;d()(p,"components",{QBtn:c.Z});n(9665);var f=n(1809);const g=(0,f.Q_)("battleship",(()=>{const e=(0,a.iH)(!0),l=(0,a.qj)({player:1,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),n=(0,a.qj)({player:2,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),i=(0,t.Fl)((()=>e.value?l:n)),o=10,u=[5,4,3,3,2,2,1,1],r={1:"Patrol Boat",2:"Battleship",3:"Destroyer",4:"Submarine",5:"Carrier"};function c(e){e.grid=[];for(let l=0;l<o;l++){const n=[];for(let e=0;e<o;e++)n.push({coordinate:{R:l,C:e},display:"BLANK",placement:"BLANK",ID:0,isHit:!1});e.grid.push(n)}}function s(e){e.ships=u.map(((e,l)=>({len:e,ID:l+1,name:r[e.toString()],isSet:!1,isSunk:!1})))}function d(){s(l),s(n),c(l),c(n)}function p(){l.placementConfirmed=!1,n.placementConfirmed=!1,d()}function v(e,l){const n=I.value,t=B.value,a=i.value.ships[n-1].len;t&&U(e,l,a)||!t&&A(e,l,a)?(P(e,l,a,t,n),i.value.ships[n-1].isSet=!0):alert("Not enough room!")}function m(e,l){const n=I.value,t=B.value,a=i.value.ships[n-1].len;(t&&U(e,l,a)||!t&&A(e,l,a))&&f(e,l,a,t,n)}function f(e,l,n,t){for(let a=0;a<n;a++)t?i.value.grid[e][l+a].display="HOVER":i.value.grid[e+a][l].display="HOVER"}function g(){for(let e=0;e<o;e++)for(let l=0;l<o;l++)i.value.grid[e][l].display=i.value.grid[e][l].placement}function h(){B.value=!B.value}function y(){_(),i.value.ships.forEach((e=>{C(e.len,e.ID),e.isSet=!0}))}function C(e,l){const n=S(e),t=n.R,a=n.C;if(1===e)return void P(t,a,e,!0,l);const i=n.right,o=n.down,u=!!i&&(!i||!o||k());P(t,a,e,u,l)}function S(e){let l=w(o),n=w(o),t=i.value.grid[l][n],a=U(l,n,e),u=A(l,n,e);while("BLANK"!==t.placement||!a&&!u)l=w(o),n=w(o),t=i.value.grid[l][n],a=U(l,n,e),u=A(l,n,e);return{R:l,C:n,right:a,down:u}}function w(e){return Math.floor(Math.random()*e)}function k(){return Math.random()<.5}const D={BLANK:"948C15",PLACED:"1F9415",HOVER:"4f9749",HIT:"921313",MISS:"383232"};function _(){i.value.grid.forEach((e=>e.forEach((e=>{e.display="BLANK",e.placement="BLANK",e.ID=0})))),i.value.ships.forEach((e=>{e.isSet=!1}))}function b(){i.value.placementConfirmed=!0,e.value=!e.value}function P(e,l,n,t,a){for(let i=0;i<n;i++)t?H(e,l+i,a):H(e+i,l,a)}function U(e,l,n){for(let t=1;t<n;t++){const n=l+t;if(n>=o)return!1;const a=i.value.grid[e][n];if("PLACED"===a.placement)return!1}return!0}function A(e,l,n){for(let t=1;t<n;t++){const n=e+t;if(n>=o)return!1;const a=i.value.grid[n][l];if("PLACED"===a.placement)return!1}return!0}function H(e,l,n){i.value.grid[e][l].display="PLACED",i.value.grid[e][l].placement="PLACED",i.value.grid[e][l].ID=n}const B=(0,a.iH)(!0),I=(0,t.Fl)((()=>{const e=i.value.ships.find((e=>!1===e.isSet));return void 0!==e?e.ID:999})),E=(0,a.iH)(!1),L=(0,a.iH)(!1),W=(0,a.iH)(!0);function K(){console.log("store next turn"),L.value=!L.value,e.value=!e.value,W.value=!W.value}return{p1Active:e,p1:l,p2:n,gridWidth:o,initGame:d,newGame:p,autoPlace:y,COLORS:D,manualSelectID:I,manualGoRight:B,gameEnd:E,turnInterval:L,isAttackAbled:W,nextTurn:K,manualPlace:v,clearPlacement:_,hoverOverCell:m,removeHover:g,activePlayer:i,confirmPlacement:b,rotate:h}})),h=["onClick","onMouseenter"],y={__name:"PlacementBoard",setup(e){const l=g(),n=(0,a.iH)();(0,t.bv)((()=>{window.addEventListener("keyup",(function(e){void 0===o.value&&void 0===u.value||82===e.keyCode&&(l.rotate(),l.removeHover(),s(o.value,u.value))}))}));const o=(0,a.iH)(void 0),u=(0,a.iH)(void 0);function r(e,n){const t=l.activePlayer.grid[e][n];return l.COLORS[t.display]}function c(e,n){"PLACED"===l.activePlayer.grid[e][n].placement||l.activePlayer.ships.every((e=>e.isSet))||l.manualPlace(e,n)}function s(e,n){const t=l.activePlayer.grid[e][n];"PLACED"!==t.placement&&(l.hoverOverCell(e,n),o.value=e,u.value=n)}function d(){l.removeHover(),o.value=void 0,u.value=void 0}return(e,o)=>((0,t.wg)(),(0,t.iD)("div",{ref_key:"board",ref:n},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(l).activePlayer.grid,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:n},[(0,t._)("div",{onClick:e=>c(l,n),onMouseenter:e=>s(l,n),onMouseleave:d,class:"cell",style:(0,i.j5)({background:"#"+r(l,n)})},null,44,h)])))),128))])))),128))],512))}},C=y,S=C,w=e=>((0,t.dD)("data-v-f070b8fe"),e=e(),(0,t.Cn)(),e),k={class:"placement-panel bg-info text-secondary"},D=w((()=>(0,t._)("p",null,"Place your ships on the board!",-1))),_={__name:"PlacementHeader",setup(e){const l=g();function n(e){return e===l.manualSelectID?"accent":"primary"}const i=(0,t.Fl)((()=>l.manualGoRight?"Right":"Down")),o=(0,t.Fl)((()=>l.activePlayer.ships.every((e=>e.isSet))));return(e,u)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",k,[D,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(l).activePlayer.ships,(e=>((0,t.wg)(),(0,t.j4)(m,{key:e.ID,label:e.name,disabled:e.isSet,class:"buttonRow",color:n(e.ID)},null,8,["label","disabled","color"])))),128)),(0,t._)("p",null,[(0,t.Uk)(" Current placement direction is "),(0,t.Wm)(m,{onClick:(0,a.SU)(l).rotate,label:(0,a.SU)(i),class:"buttonRow"},null,8,["onClick","label"]),(0,t.Uk)(' . Click button or press "R" to change. ')]),(0,t._)("p",null,[(0,t.Uk)("Alternatively, you can click to "),(0,t.Wm)(m,{onClick:(0,a.SU)(l).autoPlace,label:"Place all"},null,8,["onClick"])])]),(0,t._)("div",null,[(0,t.Wm)(m,{onClick:(0,a.SU)(l).clearPlacement,label:"Clear Placement"},null,8,["onClick"]),(0,t.Wm)(m,{disabled:!(0,a.SU)(o),onClick:(0,a.SU)(l).confirmPlacement,label:"Confirm Placement"},null,8,["disabled","onClick"])]),(0,t.Wm)(S)]))}},b=(0,r.Z)(_,[["__scopeId","data-v-f070b8fe"]]),P=b;d()(_,"components",{QBtn:c.Z});const U={__name:"ProgressQBtn",props:{shipState:Boolean,shipLength:Number},setup(e){const l=e,n=(0,a.Vh)(l,"shipState"),o=(0,t.Fl)((()=>n.value?"secondary":"primary")),u=(0,t.Fl)((()=>n.value?"warning":"secondary"));return(l,n)=>{const r=(0,t.up)("q-tooltip"),c=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(c,{"text-color":(0,a.SU)(u),color:(0,a.SU)(o)},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{anchor:"top middle",self:"top middle",offset:[30,30]},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.shipLength)+" tile",1)])),_:1})])),_:1},8,["text-color","color"])}}};var A=n(2756);const H=U,B=H;d()(U,"components",{QBtn:c.Z,QTooltip:A.Z});const I={key:0,style:{margin:"3% 0% 0% 0%"}},E=(0,t._)("p",null,"Click to toggle end turn method: ",-1),L={__name:"AttackHeader",props:{p1:Boolean},setup(e){const l=e,n=(0,a.Vh)(l,"p1"),o=g(),u=!0===n.value?(0,a.BK)(o.p1):(0,a.BK)(o.p2),r=u.ships,c=(0,a.Vh)(o,"p1Active"),s=(0,t.Fl)((()=>n.value===c.value)),d=(0,t.Fl)((()=>s.value?"Your Remaining Fleet":"Enemy Destroying Progress")),p=(0,t.Fl)((()=>u.autoTurn.value?"Auto":"Manual")),v=(0,t.Fl)((()=>!u.autoTurn.value));function f(){u.autoTurn.value=!u.autoTurn.value}return(e,l)=>{const n=(0,t.up)("q-card-section"),u=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(u,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t._)("p",null,(0,i.zw)((0,a.SU)(d)),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(r),(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.ID,class:"inline"},[(0,t.Wm)(B,{label:e.ID,shipState:e.isSunk,shipLength:e.len},null,8,["label","shipState","shipLength"])])))),128)),(0,a.SU)(s)?((0,t.wg)(),(0,t.iD)("div",I,[E,(0,t.Wm)(m,{label:(0,a.SU)(p),onClick:f,style:{margin:"0% 1% 0% 0%"}},null,8,["label"]),(0,a.SU)(v)?((0,t.wg)(),(0,t.j4)(m,{key:0,label:"end turn",onClick:(0,a.SU)(o).nextTurn},null,8,["onClick"])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])),_:1})])),_:1})])}}};var W=n(7590),K=n(3190);const T=L,F=T;d()(L,"components",{QCard:W.Z,QCardSection:K.Z,QBtn:c.Z});const R=["onClick"],Q={__name:"AttackPanel",props:{p1:Boolean},setup(e){const l=e,n=g(),o=n.COLORS,u=(0,a.Vh)(n,"p1Active"),r=(0,a.Vh)(l,"p1"),c=(0,t.Fl)((()=>r.value===u.value)),s=r.value?(0,a.BK)(n.p1):(0,a.BK)(n.p2),d=s.grid,p=s.ships;function v(e,l){const n=d.value[e][l];return c.value?"PLACED"===n.placement?n.isHit?o.HIT:o.PLACED:n.isHit?o.MISS:o.BLANK:n.isHit?"PLACED"===n.placement?o.HIT:o.MISS:o.BLANK}const m=(0,a.Vh)(n,"isAttackAbled");function f(e,l){const t=d.value[e][l];if(!m.value||t.isHit)return;if(m.value=!m.value,t.isHit=!0,"PLACED"===t.placement&&h(t.ID)){p.value[t.ID-1].isSunk=!0;const e=p.value.every((e=>e.isSunk));if(e)return void(n.gameEnd=!n.gameEnd)}const i=r.value?(0,a.BK)(n.p2):(0,a.BK)(n.p1);!c.value&&i.autoTurn.value&&setTimeout((()=>{n.nextTurn()}),1500)}function h(e){const l=d.value.flat().filter((l=>l.ID===e));return l.every((e=>e.isHit))}return(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(d),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:n},[(0,a.SU)(c)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"cell",style:(0,i.j5)({background:"#"+v(l,n)})},null,4)):((0,t.wg)(),(0,t.iD)("div",{key:1,onClick:e=>f(l,n),class:"cell",style:(0,i.j5)({background:"#"+v(l,n)})},null,12,R))])))),128))])))),128))]))}},Z=Q,q=Z,V={class:"GameEndModal"},x=(0,t._)("h1",null," Game End!",-1),M=(0,t._)("div",null,[(0,t._)("h1",null,"Battleships")],-1),O={key:0,class:"row"},N=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 1 please choose fleet placement")],-1),j={key:1,class:"row"},G=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 2 please choose fleet placement")],-1),Y={key:2},z={class:"row"},J={class:"panels col"},X={class:"panels col"},$={__name:"BattleshipsGame",setup(e){const l=g();l.initGame();const n=!0,u=(0,t.Fl)((()=>l.p1Active?"Player 1":"Player 2"));return(e,r)=>{const c=(0,t.up)("q-card-section"),s=(0,t.up)("q-btn"),d=(0,t.up)("q-card-actions"),p=(0,t.up)("q-card"),v=(0,t.up)("q-dialog"),f=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",V,[(0,t.Wm)(v,{modelValue:(0,a.SU)(l).gameEnd,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,a.SU)(l).gameEnd=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(u))+" won!",1),x])),_:1}),(0,t.Wm)(d,{align:"center"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(s,{label:"start new",onClick:(0,a.SU)(l).newGame,outline:""},null,8,["onClick"]),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),M,(0,t.wy)((0,t._)("div",null,[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(u))+" ready?",1),(0,t.Wm)(m,{label:"next turn",onClick:r[1]||(r[1]=e=>(0,a.SU)(l).turnInterval=!(0,a.SU)(l).turnInterval)})],512),[[o.F8,(0,a.SU)(l).turnInterval]]),(0,t.wy)((0,t._)("div",null,[(0,a.SU)(l).p1.placementConfirmed?(0,a.SU)(l).p2.placementConfirmed?((0,t.wg)(),(0,t.iD)("div",Y,[(0,t._)("h2",null,(0,i.zw)((0,a.SU)(u))+"'s turn",1),(0,t._)("div",z,[(0,t._)("div",J,[(0,t.Wm)(F,{p1:n}),(0,t.Wm)(q,{p1:n})]),(0,t._)("div",X,[(0,t.Wm)(F,{p1:!n},null,8,["p1"]),(0,t.Wm)(q,{p1:!n},null,8,["p1"])])])])):((0,t.wg)(),(0,t.iD)("div",j,[G,(0,t.Wm)(P,{class:"panels col"})])):((0,t.wg)(),(0,t.iD)("div",O,[(0,t.Wm)(P,{class:"panels col"}),N]))],512),[[o.F8,!(0,a.SU)(l).turnInterval]])])}}};var ee=n(3997),le=n(1821),ne=n(2146);const te=$,ae=te;d()($,"components",{QDialog:ee.Z,QCard:W.Z,QCardSection:K.Z,QCardActions:le.Z,QBtn:c.Z}),d()($,"directives",{ClosePopup:ne.Z})}}]);