"use strict";(globalThis["webpackChunkbattleship"]=globalThis["webpackChunkbattleship"]||[]).push([[880],{1880:(e,l,n)=>{n.r(l),n.d(l,{default:()=>ae});var t=n(9835),a=n(499),i=n(6970),o=n(1957);function r(e,l){const n=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(n,{class:"custom-btn",color:"primary","text-color":"secondary"})}var u=n(1639),c=n(2093),s=n(9984),d=n.n(s);const v={},p=(0,u.Z)(v,[["render",r],["__scopeId","data-v-33a8217d"]]),m=p;d()(v,"components",{QBtn:c.Z});n(9665);var f=n(1809);const g=(0,f.Q_)("battleship",(()=>{const e=(0,a.iH)(!0),l=(0,a.qj)({player:1,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),n=(0,a.qj)({player:2,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),i=(0,t.Fl)((()=>e.value?l:n)),o=10,r=[5,4,3,3,2,2,1,1],u={1:"Patrol Boat",2:"Battleship",3:"Destroyer",4:"Submarine",5:"Carrier"};function c(e){e.grid=[];for(let l=0;l<o;l++){const n=[];for(let e=0;e<o;e++)n.push({coordinate:{R:l,C:e},display:"BLANK",placement:"BLANK",ID:0,isHit:!1});e.grid.push(n)}}function s(e){e.ships=r.map(((e,l)=>({len:e,ID:l+1,name:u[e.toString()],isSet:!1,isSunk:!1})))}function d(){s(l),s(n),c(l),c(n)}function v(){l.placementConfirmed=!1,n.placementConfirmed=!1,d()}function p(e,l){const n=E.value,t=I.value,a=i.value.ships[n-1].len;t&&U(e,l,a)||!t&&H(e,l,a)?(P(e,l,a,t,n),i.value.ships[n-1].isSet=!0):alert("Not enough room!")}function m(e,l){if(i.value.ships.every((e=>e.isSet)))return;const n=E.value,t=I.value,a=i.value.ships[n-1].len;(t&&U(e,l,a)||!t&&H(e,l,a))&&f(e,l,a,t,n)}function f(e,l,n,t){for(let a=0;a<n;a++)t?i.value.grid[e][l+a].display="HOVER":i.value.grid[e+a][l].display="HOVER"}function g(){for(let e=0;e<o;e++)for(let l=0;l<o;l++)i.value.grid[e][l].display=i.value.grid[e][l].placement}function h(){I.value=!I.value}function y(){_(),i.value.ships.forEach((e=>{k(e.len,e.ID),e.isSet=!0}))}function k(e,l){const n=C(e),t=n.R,a=n.C;if(1===e)return void P(t,a,e,!0,l);const i=n.right,o=n.down,r=!!i&&(!i||!o||S());P(t,a,e,r,l)}function C(e){let l=w(o),n=w(o),t=i.value.grid[l][n],a=U(l,n,e),r=H(l,n,e);while("BLANK"!==t.placement||!a&&!r)l=w(o),n=w(o),t=i.value.grid[l][n],a=U(l,n,e),r=H(l,n,e);return{R:l,C:n,right:a,down:r}}function w(e){return Math.floor(Math.random()*e)}function S(){return Math.random()<.5}const D={BLANK:"948C15",PLACED:"1F9415",HOVER:"4f9749",HIT:"921313",MISS:"383232"};function _(){i.value.grid.forEach((e=>e.forEach((e=>{e.display="BLANK",e.placement="BLANK",e.ID=0})))),i.value.ships.forEach((e=>{e.isSet=!1}))}function b(){i.value.placementConfirmed=!0,e.value=!e.value}function P(e,l,n,t,a){for(let i=0;i<n;i++)t?A(e,l+i,a):A(e+i,l,a)}function U(e,l,n){for(let t=1;t<n;t++){const n=l+t;if(n>=o)return!1;const a=i.value.grid[e][n];if("PLACED"===a.placement)return!1}return!0}function H(e,l,n){for(let t=1;t<n;t++){const n=e+t;if(n>=o)return!1;const a=i.value.grid[n][l];if("PLACED"===a.placement)return!1}return!0}function A(e,l,n){i.value.grid[e][l].display="PLACED",i.value.grid[e][l].placement="PLACED",i.value.grid[e][l].ID=n}const I=(0,a.iH)(!0),E=(0,t.Fl)((()=>{const e=i.value.ships.find((e=>!1===e.isSet));return void 0!==e?e.ID:999})),L=(0,a.iH)(!1),B=(0,a.iH)(!1),W=(0,a.iH)(!0);function T(){i.value.autoTurn=!i.value.autoTurn}function K(){B.value=!B.value,e.value=!e.value,W.value=!W.value}return{p1Active:e,p1:l,p2:n,gridWidth:o,initGame:d,newGame:v,autoPlace:y,COLORS:D,manualSelectID:E,manualGoRight:I,gameEnd:L,turnInterval:B,isAttackAbled:W,nextTurn:K,manualPlace:p,clearPlacement:_,hoverOverCell:m,removeHover:g,activePlayer:i,confirmPlacement:b,rotate:h,endTurnToggle:T}})),h=["onClick","onMouseenter"],y={__name:"PlacementBoard",setup(e){const l=g(),n=(0,a.iH)();(0,t.bv)((()=>{window.addEventListener("keyup",(function(e){void 0===o.value&&void 0===r.value||82===e.keyCode&&(l.rotate(),l.removeHover(),s(o.value,r.value))}))}));const o=(0,a.iH)(void 0),r=(0,a.iH)(void 0);function u(e,n){const t=l.activePlayer.grid[e][n];return l.COLORS[t.display]}function c(e,n){"PLACED"===l.activePlayer.grid[e][n].placement||l.activePlayer.ships.every((e=>e.isSet))||l.manualPlace(e,n)}function s(e,n){const t=l.activePlayer.grid[e][n];"PLACED"!==t.placement&&(l.hoverOverCell(e,n),o.value=e,r.value=n)}function d(){l.removeHover(),o.value=void 0,r.value=void 0}return(e,o)=>((0,t.wg)(),(0,t.iD)("div",{ref_key:"board",ref:n},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(l).activePlayer.grid,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:n},[(0,t._)("div",{onClick:e=>c(l,n),onMouseenter:e=>s(l,n),onMouseleave:d,class:"cell",style:(0,i.j5)({background:"#"+u(l,n)})},null,44,h)])))),128))])))),128))],512))}},k=y,C=k,w=e=>((0,t.dD)("data-v-f070b8fe"),e=e(),(0,t.Cn)(),e),S={class:"placement-panel bg-info text-secondary"},D=w((()=>(0,t._)("p",null,"Place your ships on the board!",-1))),_={__name:"PlacementHeader",setup(e){const l=g();function n(e){return e===l.manualSelectID?"accent":"primary"}const i=(0,t.Fl)((()=>l.manualGoRight?"Right":"Down")),o=(0,t.Fl)((()=>l.activePlayer.ships.every((e=>e.isSet))));return(e,r)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",S,[D,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(l).activePlayer.ships,(e=>((0,t.wg)(),(0,t.j4)(m,{key:e.ID,label:e.name,disabled:e.isSet,class:"buttonRow",color:n(e.ID)},null,8,["label","disabled","color"])))),128)),(0,t._)("p",null,[(0,t.Uk)(" Current placement direction is "),(0,t.Wm)(m,{onClick:(0,a.SU)(l).rotate,label:(0,a.SU)(i),class:"buttonRow"},null,8,["onClick","label"]),(0,t.Uk)(' . Click button or press "R" to change. ')]),(0,t._)("p",null,[(0,t.Uk)("Alternatively, you can click to "),(0,t.Wm)(m,{onClick:(0,a.SU)(l).autoPlace,label:"Place all"},null,8,["onClick"])])]),(0,t._)("div",null,[(0,t.Wm)(m,{onClick:(0,a.SU)(l).clearPlacement,label:"Clear Placement"},null,8,["onClick"]),(0,t.Wm)(m,{disabled:!(0,a.SU)(o),onClick:(0,a.SU)(l).confirmPlacement,label:"Confirm Placement"},null,8,["disabled","onClick"])]),(0,t.Wm)(C)]))}},b=(0,u.Z)(_,[["__scopeId","data-v-f070b8fe"]]),P=b;d()(_,"components",{QBtn:c.Z});const U={__name:"ProgressQBtn",props:{shipState:Boolean,shipLength:Number},setup(e){const l=e,n=(0,a.Vh)(l,"shipState"),o=(0,t.Fl)((()=>n.value?"secondary":"primary")),r=(0,t.Fl)((()=>n.value?"warning":"secondary"));return(l,n)=>{const u=(0,t.up)("q-tooltip"),c=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(c,{"text-color":(0,a.SU)(r),color:(0,a.SU)(o)},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{anchor:"top middle",self:"top middle",offset:[30,30]},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.shipLength)+" tile",1)])),_:1})])),_:1},8,["text-color","color"])}}};var H=n(2756);const A=U,I=A;d()(U,"components",{QBtn:c.Z,QTooltip:H.Z});const E={key:0,style:{margin:"3% 0% 0% 0%"}},L={key:0},B={__name:"AttackHeader",props:{p1:Boolean},setup(e){const l=e,n=g(),o=(0,a.BK)(l.p1?n.p1:n.p2),r=o.ships,u=(0,t.Fl)((()=>o.player.value===n.activePlayer.player)),c=(0,t.Fl)((()=>u.value?"Your Remaining Fleet":"Enemy Destroying Progress")),s=(0,t.Fl)((()=>o.autoTurn.value?"Automatically":"Manually")),d=(0,t.Fl)((()=>!o.autoTurn.value));function v(e){return!!u.value&&e}return(e,l)=>{const o=(0,t.up)("q-card-section"),p=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(p,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t._)("p",null,(0,i.zw)((0,a.SU)(c)),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(r),(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.ID,class:"inline"},[(0,t.Wm)(I,{label:e.name,shipState:v(e.isSunk),shipLength:e.len},null,8,["label","shipState","shipLength"])])))),128)),(0,a.SU)(u)?((0,t.wg)(),(0,t.iD)("div",E,[(0,t._)("p",null,[(0,t.Uk)("Turn will end "),(0,t.Wm)(m,{label:(0,a.SU)(s),onClick:(0,a.SU)(n).endTurnToggle,style:{margin:"0% 1% 0% 0%"}},null,8,["label","onClick"]),(0,t.Uk)(" . Click button to change. ")]),(0,a.SU)(d)?((0,t.wg)(),(0,t.iD)("p",L,[(0,t.Uk)(" Click to "),(0,t.Wm)(m,{label:"end turn",onClick:(0,a.SU)(n).nextTurn},null,8,["onClick"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])),_:1})])),_:1})])}}};var W=n(7590),T=n(3190);const K=B,F=K;d()(B,"components",{QCard:W.Z,QCardSection:T.Z,QBtn:c.Z});const R=["onClick"],Q={__name:"AttackPanel",props:{p1:Boolean},setup(e){const l=e,n=g(),o=n.COLORS,r=(0,a.Vh)(n,"p1Active"),u=(0,a.Vh)(l,"p1"),c=(0,t.Fl)((()=>u.value===r.value)),s=u.value?(0,a.BK)(n.p1):(0,a.BK)(n.p2),d=s.grid,v=s.ships;function p(e,l){const n=d.value[e][l];return c.value?"PLACED"===n.placement?n.isHit?o.HIT:o.PLACED:n.isHit?o.MISS:o.BLANK:n.isHit?"PLACED"===n.placement?o.HIT:o.MISS:o.BLANK}const m=(0,a.Vh)(n,"isAttackAbled");function f(e,l){const t=d.value[e][l];if(!m.value||t.isHit)return;if(m.value=!m.value,t.isHit=!0,"PLACED"===t.placement&&h(t.ID)){v.value[t.ID-1].isSunk=!0;const e=v.value.every((e=>e.isSunk));if(e)return void(n.gameEnd=!n.gameEnd)}const i=u.value?(0,a.BK)(n.p2):(0,a.BK)(n.p1);!c.value&&i.autoTurn.value&&setTimeout((()=>{n.nextTurn()}),750)}function h(e){const l=d.value.flat().filter((l=>l.ID===e));return l.every((e=>e.isHit))}return(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(d),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:n},[(0,a.SU)(c)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"cell",style:(0,i.j5)({background:"#"+p(l,n)})},null,4)):((0,t.wg)(),(0,t.iD)("div",{key:1,onClick:e=>f(l,n),class:"cell",style:(0,i.j5)({background:"#"+p(l,n)})},null,12,R))])))),128))])))),128))]))}},Z=Q,q=Z,O={class:"GameEndModal"},M=(0,t._)("h1",null," Game End!",-1),x=(0,t._)("div",null,[(0,t._)("h1",null,"Battleship")],-1),N={key:0,class:"row"},V=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 1 please choose fleet placement")],-1),G={key:1,class:"row"},j=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 2 please choose fleet placement")],-1),Y={key:2},z={class:"row"},J={class:"panels col"},X={class:"panels col"},$={__name:"BattleshipGame",setup(e){const l=g();l.initGame();const n=!0,r=(0,t.Fl)((()=>l.p1Active?"Player 1":"Player 2")),u=(0,a.iH)();return(0,t.bv)((()=>{window.addEventListener("keyup",(function(e){l.turnInterval&&13===e.keyCode&&(l.turnInterval=!l.turnInterval)}))})),(e,c)=>{const s=(0,t.up)("q-card-section"),d=(0,t.up)("q-btn"),v=(0,t.up)("q-card-actions"),p=(0,t.up)("q-card"),f=(0,t.up)("q-dialog"),g=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",O,[(0,t.Wm)(f,{modelValue:(0,a.SU)(l).gameEnd,"onUpdate:modelValue":c[0]||(c[0]=e=>(0,a.SU)(l).gameEnd=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(r))+" won!",1),M])),_:1}),(0,t.Wm)(v,{align:"center"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(d,{label:"start new",onClick:(0,a.SU)(l).newGame,outline:""},null,8,["onClick"]),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),x,(0,t.wy)((0,t._)("div",{ref_key:"customInterval",ref:u},[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(r))+" ready?",1),(0,t._)("p",null,[(0,t.Uk)(" Click button to go "),(0,t.Wm)(m,{label:"next turn",onClick:c[1]||(c[1]=e=>(0,a.SU)(l).turnInterval=!(0,a.SU)(l).turnInterval)}),(0,t.Uk)(" . Or press 'Enter'. ")])],512),[[o.F8,(0,a.SU)(l).turnInterval]]),(0,t.wy)((0,t._)("div",null,[(0,a.SU)(l).p1.placementConfirmed?(0,a.SU)(l).p2.placementConfirmed?((0,t.wg)(),(0,t.iD)("div",Y,[(0,t._)("h2",null,(0,i.zw)((0,a.SU)(r))+"'s turn",1),(0,t._)("div",z,[(0,t._)("div",J,[(0,t.Wm)(F,{p1:!0}),(0,t.Wm)(q,{p1:n})]),(0,t._)("div",X,[(0,t.Wm)(F,{p1:!1}),(0,t.Wm)(q,{p1:!n},null,8,["p1"])])])])):((0,t.wg)(),(0,t.iD)("div",G,[j,(0,t.Wm)(P,{class:"panels col"})])):((0,t.wg)(),(0,t.iD)("div",N,[(0,t.Wm)(P,{class:"panels col"}),V]))],512),[[o.F8,!(0,a.SU)(l).turnInterval]])])}}};var ee=n(3997),le=n(1821),ne=n(2146);const te=$,ae=te;d()($,"components",{QDialog:ee.Z,QCard:W.Z,QCardSection:T.Z,QCardActions:le.Z,QBtn:c.Z}),d()($,"directives",{ClosePopup:ne.Z})}}]);